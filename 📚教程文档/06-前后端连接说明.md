# ğŸ”— å‰åç«¯è¿æ¥è¯´æ˜

## âœ… å½“å‰çŠ¶æ€

å‰åç«¯å·²æˆåŠŸè¿æ¥ï¼

- âœ… åç«¯æœåŠ¡è¿è¡Œåœ¨ï¼šhttp://localhost:8000
- âœ… å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ï¼šhttp://localhost:5173
- âœ… API ç«¯ç‚¹ï¼šhttp://localhost:8000/api/...
- âœ… å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health

---

## ğŸ“Š æœåŠ¡çŠ¶æ€æ£€æµ‹

### **ç™»å½•é¡µé¢çŠ¶æ€æ¡†**

æ‰“å¼€ http://localhost:5173ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ åç«¯åœ¨çº¿             â”‚  â† ç»¿è‰² = åç«¯æ­£å¸¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æˆ–

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ åç«¯ç¦»çº¿             â”‚  â† çº¢è‰² = åç«¯æœªå¯åŠ¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è‡ªåŠ¨æ£€æµ‹ï¼š** æ¯ 30 ç§’è‡ªåŠ¨æ£€æµ‹ä¸€æ¬¡åç«¯çŠ¶æ€

---

## ğŸ”§ API é…ç½®

### **å‰ç«¯é…ç½®æ–‡ä»¶**

`/src/app/services/api-config.ts`

```typescript
// API åŸºç¡€åœ°å€
export const API_BASE_URL = 'http://localhost:8000';

// API ç«¯ç‚¹
export const API_ENDPOINTS = {
  health: '/health',
  auth: {
    sendCode: '/api/auth/send-code',
    login: '/api/auth/login',
  },
  // ... å…¶ä»–ç«¯ç‚¹
};
```

---

## ğŸš€ å¯åŠ¨æ­¥éª¤

### **1. å¯åŠ¨åç«¯**

```bash
cd D:\Figma_skyriff\backend
python -m app.main
```

âœ… çœ‹åˆ°ï¼š`Uvicorn running on http://127.0.0.1:8000`

### **2. å¯åŠ¨å‰ç«¯**

```bash
cd D:\Figma_skyriff
npm run dev
```

âœ… æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ï¼šhttp://localhost:5173

### **3. éªŒè¯è¿æ¥**

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹ Network æ ‡ç­¾ï¼š

```
âœ… GET http://localhost:8000/health â†’ 200 OK
âœ… è¿”å›: {"status": "ok", "timestamp": "..."}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### **é—®é¢˜1: åç«¯æ˜¾ç¤ºç¦»çº¿ï¼ˆçº¢è‰²ï¼‰**

**åŸå› ï¼š**
1. åç«¯æœªå¯åŠ¨
2. ç«¯å£è¢«å ç”¨
3. CORS é…ç½®é—®é¢˜

**è§£å†³æ–¹æ³•ï¼š**
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
# 2. è®¿é—® http://localhost:8000/health
# 3. æŸ¥çœ‹åç«¯å‘½ä»¤è¡Œæ˜¯å¦æœ‰é”™è¯¯
```

---

### **é—®é¢˜2: CORS é”™è¯¯**

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Access to fetch at 'http://localhost:8000' from origin 
'http://localhost:5173' has been blocked by CORS policy
```

**è§£å†³æ–¹æ³•ï¼š**

åç«¯å·²é…ç½® CORSï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ `/backend/app/main.py`ï¼š

```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:5173"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

### **é—®é¢˜3: ç½‘ç»œè¯·æ±‚å¤±è´¥**

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Failed to fetch
```

**å¯èƒ½åŸå› ï¼š**
1. åç«¯æœªå¯åŠ¨
2. ç«¯å£é”™è¯¯
3. é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ³•ï¼š**
```bash
# 1. ç¡®è®¤åç«¯è¿è¡Œåœ¨ 8000 ç«¯å£
# 2. æµè§ˆå™¨ç›´æ¥è®¿é—® http://localhost:8000/health
# 3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
```

---

## ğŸ“¡ API è°ƒç”¨ç¤ºä¾‹

### **å¥åº·æ£€æŸ¥**

```typescript
// å‰ç«¯ä»£ç 
const checkHealth = async () => {
  const response = await fetch('http://localhost:8000/health');
  const data = await response.json();
  console.log(data); // {"status": "ok", ...}
};
```

### **ç™»å½•æ¥å£**

```typescript
// 1. å‘é€éªŒè¯ç 
const sendCode = async (phone: string) => {
  const response = await fetch('http://localhost:8000/api/auth/send-code', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ phone, purpose: 'login' })
  });
  return response.json();
};

// 2. ç™»å½•
const login = async (phone: string, code: string) => {
  const response = await fetch('http://localhost:8000/api/auth/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ phone, verification_code: code })
  });
  return response.json();
};
```

---

## ğŸ” è®¤è¯æµç¨‹

### **1. è·å–éªŒè¯ç **

```
å‰ç«¯ â†’ POST /api/auth/send-code
     { phone: "13800138000", purpose: "login" }

åç«¯ â†’ Mock ç¯å¢ƒä¸‹ï¼ŒéªŒè¯ç æ‰“å°åœ¨å‘½ä»¤è¡Œ
     { code: "200", message: "éªŒè¯ç å·²å‘é€" }
```

### **2. ç™»å½•**

```
å‰ç«¯ â†’ POST /api/auth/login
     { phone: "13800138000", verification_code: "123456" }

åç«¯ â†’ è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œ Token
     {
       "code": "200",
       "data": {
         "user": {...},
         "token": "eyJ..."
       }
     }
```

### **3. åç»­è¯·æ±‚**

```
å‰ç«¯ â†’ æ‰€æœ‰ API è¯·æ±‚éƒ½å¸¦ä¸Š Token
     headers: {
       "Authorization": "Bearer eyJ..."
     }

åç«¯ â†’ éªŒè¯ Tokenï¼Œè¿”å›æ•°æ®
```

---

## ğŸ“Š API åˆ—è¡¨

### **è®¤è¯ç›¸å…³**
- `POST /api/auth/send-code` - å‘é€éªŒè¯ç 
- `POST /api/auth/login` - ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### **è§†é¢‘ç”Ÿæˆ**
- `POST /api/tasks/create` - åˆ›å»ºç”Ÿæˆä»»åŠ¡
- `GET /api/tasks/{task_id}` - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
- `GET /api/tasks/my-tasks` - æˆ‘çš„ä»»åŠ¡åˆ—è¡¨

### **ä½œå“ç®¡ç†**
- `GET /api/works` - ä½œå“åˆ—è¡¨
- `POST /api/works/{work_id}/like` - ç‚¹èµ
- `POST /api/works/{work_id}/comment` - è¯„è®º

### **é’±åŒ…**
- `GET /api/wallets/credits` - ç§¯åˆ†ä½™é¢
- `GET /api/wallets/coins` - é‡‘å¸ä½™é¢

### **æ”¯ä»˜å……å€¼**
- `GET /api/payments/products` - å•†å“åˆ—è¡¨
- `POST /api/payments/create` - åˆ›å»ºæ”¯ä»˜å•

### **æœˆå¡è®¢é˜…**
- `GET /api/subscriptions/my-subscription` - æˆ‘çš„æœˆå¡
- `POST /api/subscriptions/claim-daily` - é¢†å–æ¯æ—¥ç§¯åˆ†

### **ä»»åŠ¡ä¸­å¿ƒ**
- `GET /api/tasks-center/my-tasks` - æˆ‘çš„ä»»åŠ¡
- `POST /api/tasks-center/complete` - å®Œæˆä»»åŠ¡

å®Œæ•´ API æ–‡æ¡£ï¼šhttp://localhost:8000/docs

---

## âœ… éªŒè¯æ¸…å•

- [ ] åç«¯æˆåŠŸå¯åŠ¨ï¼ˆ8000ç«¯å£ï¼‰
- [ ] å‰ç«¯æˆåŠŸå¯åŠ¨ï¼ˆ5173ç«¯å£ï¼‰
- [ ] æµè§ˆå™¨æ‰“å¼€ http://localhost:5173
- [ ] çœ‹åˆ°ç»¿è‰²"åç«¯åœ¨çº¿"çŠ¶æ€
- [ ] å¯ä»¥è¾“å…¥æ‰‹æœºå·
- [ ] å¯ä»¥è·å–éªŒè¯ç ï¼ˆæŸ¥çœ‹åç«¯æ—¥å¿—ï¼‰
- [ ] å¯ä»¥ç™»å½•æˆåŠŸ

---

## ğŸ¯ ä¸‹ä¸€æ­¥

è¿æ¥æˆåŠŸåï¼Œä½ å¯ä»¥ï¼š

1. æµ‹è¯•ç™»å½•åŠŸèƒ½
2. ç”ŸæˆAIè§†é¢‘
3. ä½“éªŒ5ä¸ªTabé¡µé¢
4. æµ‹è¯•å……å€¼/æœˆå¡/ä»»åŠ¡ä¸­å¿ƒ

**å¼€å§‹ä½¿ç”¨å§ï¼** ğŸ‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](./01-å¿«é€Ÿå¯åŠ¨æŒ‡å—.md)
- [å¸¸è§é—®é¢˜FAQ](./02-å¸¸è§é—®é¢˜FAQ.md)
- [ç”Ÿäº§éƒ¨ç½²æ¶æ„](./03-ç”Ÿäº§éƒ¨ç½²æ¶æ„.md)
