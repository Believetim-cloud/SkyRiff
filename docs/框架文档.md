# SkyRiff APP - æ¡†æ¶æ–‡æ¡£

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

```
å‰ç«¯æ¡†æ¶: React 18 + TypeScript
æ ·å¼æ–¹æ¡ˆ: Tailwind CSS v4.0
åŠ¨ç”»åº“: Motion (Framer Motion)
å›¾æ ‡åº“: Lucide React
æ„å»ºå·¥å…·: Vite
åŒ…ç®¡ç†: npm
```

### é¡¹ç›®ç»“æ„

```
/src
â”œâ”€â”€ /app
â”‚   â”œâ”€â”€ App.tsx                    # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ /components
â”‚       â”œâ”€â”€ HomePage.tsx           # é¦–é¡µ - çŸ­è§†é¢‘æµ
â”‚       â”œâ”€â”€ ToolsPage.tsx          # å·¥å…·é¡µ
â”‚       â”œâ”€â”€ CreatePage.tsx         # åˆ›ä½œé¡µ
â”‚       â”œâ”€â”€ AssetsPage.tsx         # èµ„äº§é¡µ
â”‚       â”œâ”€â”€ ProfilePage.tsx        # æˆ‘çš„é¡µ
â”‚       â”œâ”€â”€ VideoStudio.tsx        # åˆ›æ„å·¥ä½œå®¤
â”‚       â”œâ”€â”€ ServerLauncher.tsx     # æœåŠ¡å™¨å¯åŠ¨å™¨
â”‚       â”œâ”€â”€ VideoGenerator.tsx     # è§†é¢‘ç”Ÿæˆå™¨
â”‚       â””â”€â”€ /figma
â”‚           â””â”€â”€ ImageWithFallback.tsx  # å›¾ç‰‡å®¹é”™ç»„ä»¶
â”œâ”€â”€ /services
â”‚   â”œâ”€â”€ sora-api.ts                # Sora2 APIæœåŠ¡å±‚
â”‚   â”œâ”€â”€ storage.ts                 # æœ¬åœ°å­˜å‚¨æœåŠ¡
â”‚   â””â”€â”€ video-pool.ts              # è§†é¢‘æ± ç®¡ç†
â”œâ”€â”€ /styles
â”‚   â”œâ”€â”€ theme.css                  # ä¸»é¢˜å˜é‡
â”‚   â””â”€â”€ fonts.css                  # å­—ä½“å¯¼å…¥
â””â”€â”€ main.tsx                       # åº”ç”¨å…¥å£

/docs
â”œâ”€â”€ äº¤äº’æ–‡æ¡£.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ æ¡†æ¶æ–‡æ¡£.md                    # æŠ€æœ¯æ–‡æ¡£
â””â”€â”€ APIæ–‡æ¡£.md                     # Sora2 APIæ–‡æ¡£
```

---

## ğŸ¯ æ ¸å¿ƒæ¶æ„è®¾è®¡

### 1. ç»„ä»¶å±‚æ¬¡ç»“æ„

```
App (æ ¹ç»„ä»¶)
â”œâ”€â”€ ServerLauncher (æ¡ä»¶æ¸²æŸ“)
â”œâ”€â”€ VideoStudio Quick Button (å›ºå®šå®šä½)
â”œâ”€â”€ Main Content (åŠ¨æ€æ¸²æŸ“)
â”‚   â”œâ”€â”€ HomePage
â”‚   â”œâ”€â”€ ToolsPage
â”‚   â”œâ”€â”€ CreatePage
â”‚   â”œâ”€â”€ AssetsPage
â”‚   â””â”€â”€ ProfilePage
â”œâ”€â”€ VideoGenerator (æ¨¡æ€å¼¹çª—)
â””â”€â”€ Bottom Navigation (åº•éƒ¨å¯¼èˆª)
```

### 2. çŠ¶æ€ç®¡ç†

**åº”ç”¨çº§çŠ¶æ€** (App.tsx):
```typescript
const [activeTab, setActiveTab] = useState<TabType>('home');
const [showServerLauncher, setShowServerLauncher] = useState(true);
const [processingCount, setProcessingCount] = useState(0);
const [showCreateModal, setShowCreateModal] = useState(false);
const [isPlusRotating, setIsPlusRotating] = useState(false);
```

**é¡µé¢çº§çŠ¶æ€** (å„é¡µé¢ç»„ä»¶):
```typescript
// HomePage
const [currentVideoIndex, setCurrentVideoIndex] = useState(0);
const [isLiked, setIsLiked] = useState(false);

// VideoGenerator
const [prompt, setPrompt] = useState('');
const [isGenerating, setIsGenerating] = useState(false);
const [progress, setProgress] = useState(0);

// AssetsPage
const [activeTab, setActiveTab] = useState<'local' | 'published'>('local');
const [videos, setVideos] = useState([]);
```

### 3. æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ â†’ ç»„ä»¶çŠ¶æ€æ›´æ–° â†’ è°ƒç”¨æœåŠ¡å±‚ â†’ æ›´æ–°localStorage â†’ è§¦å‘UIæ›´æ–°
    â†“
äº‹ä»¶ç›‘å¬ â†’ è·¨ç»„ä»¶é€šä¿¡ â†’ çŠ¶æ€åŒæ­¥
```

---

## ğŸ”Œ Sora2 APIé›†æˆ

### APIæœåŠ¡å±‚ (sora-api.ts)

#### å®Œæ•´é›†æˆçš„8ä¸ªæ¥å£

```typescript
// 1. æ¨¡å‹åˆ—è¡¨
getModels(): Promise<ModelsResponse>

// 2. ç”Ÿæˆè§†é¢‘ (æ ¸å¿ƒåŠŸèƒ½)
generateVideo(params: {
  model: string,
  prompt: string,
  size?: '1920x1080' | '1080x1920',
  duration?: 5 | 10 | 15
}): Promise<GenerateResponse>

// 3. æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
getTaskStatus(taskId: string): Promise<TaskStatusResponse>

// 4. è·å–ä»»åŠ¡åˆ—è¡¨
getTasks(params: {
  page?: number,
  page_size?: number,
  status?: 'pending' | 'processing' | 'completed' | 'failed'
}): Promise<TasksResponse>

// 5. å–æ¶ˆä»»åŠ¡
cancelTask(taskId: string): Promise<CancelResponse>

// 6. è·å–ç”¨æˆ·ä¿¡æ¯
getUserInfo(): Promise<UserInfoResponse>

// 7. è·å–è®¡è´¹ä¿¡æ¯
getBillingInfo(): Promise<BillingInfoResponse>

// 8. è·å–ä½¿ç”¨ç»Ÿè®¡
getUsageStats(params: {
  start_date?: string,
  end_date?: string
}): Promise<UsageStatsResponse>
```

#### APIé…ç½®

```typescript
const API_CONFIG = {
  baseURL: 'https://api.sora2.ai/v1',
  timeout: 30000,
  headers: {
    'Authorization': `Bearer ${API_KEY}`,
    'Content-Type': 'application/json'
  }
};
```

#### é”™è¯¯å¤„ç†

```typescript
try {
  const response = await fetch(url, options);
  
  if (!response.ok) {
    throw new Error(`API Error: ${response.status}`);
  }
  
  return await response.json();
} catch (error) {
  console.error('APIè°ƒç”¨å¤±è´¥:', error);
  // Toastæç¤ºç”¨æˆ·
  return null;
}
```

### è§†é¢‘ç”Ÿæˆæµç¨‹å®ç°

```typescript
// æ­¥éª¤1: è°ƒç”¨ç”Ÿæˆæ¥å£
const generateResponse = await generateVideo({
  model: 'sora-v2',
  prompt: userPrompt,
  size: '1080x1920',
  duration: 10
});

// æ­¥éª¤2: ä¿å­˜ä»»åŠ¡IDåˆ°æœ¬åœ°
const video = {
  id: generateResponse.task_id,
  status: 'processing',
  progress: 0,
  prompt: userPrompt,
  createdAt: new Date().toISOString()
};
saveLocalVideo(video);

// æ­¥éª¤3: è½®è¯¢æ£€æŸ¥çŠ¶æ€
const pollInterval = setInterval(async () => {
  const statusResponse = await getTaskStatus(video.id);
  
  if (statusResponse.status === 'completed') {
    clearInterval(pollInterval);
    updateVideoStatus(video.id, {
      status: 'completed',
      videoUrl: statusResponse.result.video_url,
      thumbnailUrl: statusResponse.result.thumbnail_url
    });
    // è§¦å‘UIæ›´æ–°
    window.dispatchEvent(new CustomEvent('video-generation-complete'));
  } else if (statusResponse.status === 'failed') {
    clearInterval(pollInterval);
    // é”™è¯¯å¤„ç†
  } else {
    // æ›´æ–°è¿›åº¦
    updateVideoProgress(video.id, statusResponse.progress);
  }
}, 5000); // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
```

---

## ğŸ’¾ æ•°æ®æŒä¹…åŒ–

### localStorageç­–ç•¥

#### å­˜å‚¨ç»“æ„

```typescript
// æœ¬åœ°è§†é¢‘åˆ—è¡¨
localStorage.setItem('skyriff_local_videos', JSON.stringify([
  {
    id: 'uuid-1',
    videoUrl: 'https://...',
    thumbnailUrl: 'https://...',
    prompt: 'ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯',
    status: 'completed',
    progress: 100,
    createdAt: '2024-12-24T10:00:00Z'
  }
]));

// è§†é¢‘æ± ï¼ˆå·²å‘å¸ƒï¼‰
localStorage.setItem('skyriff_video_pool', JSON.stringify([
  {
    id: 'uuid-1',
    videoUrl: 'https://...',
    thumbnailUrl: 'https://...',
    title: 'è§†é¢‘æ ‡é¢˜',
    description: 'è§†é¢‘æè¿°',
    author: 'åˆ›ä½œè€…åç§°',
    avatar: 'https://...',
    likes: 123,
    comments: 45,
    shares: 67,
    tags: ['#AI', '#åˆ›æ„'],
    publishedAt: '2024-12-24T10:30:00Z'
  }
]));

// ç”¨æˆ·é…ç½®
localStorage.setItem('skyriff_user_config', JSON.stringify({
  apiKey: 'sk-xxx',
  serverStatus: 'online',
  lastUsed: '2024-12-24T10:00:00Z'
}));
```

#### å­˜å‚¨æœåŠ¡ (storage.ts)

```typescript
// æœ¬åœ°è§†é¢‘ç®¡ç†
export function getLocalVideos(): LocalVideo[] {
  const data = localStorage.getItem('skyriff_local_videos');
  return data ? JSON.parse(data) : [];
}

export function saveLocalVideo(video: LocalVideo): void {
  const videos = getLocalVideos();
  videos.push(video);
  localStorage.setItem('skyriff_local_videos', JSON.stringify(videos));
}

export function updateVideoStatus(
  id: string, 
  updates: Partial<LocalVideo>
): void {
  const videos = getLocalVideos();
  const index = videos.findIndex(v => v.id === id);
  if (index !== -1) {
    videos[index] = { ...videos[index], ...updates };
    localStorage.setItem('skyriff_local_videos', JSON.stringify(videos));
  }
}

export function deleteLocalVideo(id: string): void {
  const videos = getLocalVideos();
  const filtered = videos.filter(v => v.id !== id);
  localStorage.setItem('skyriff_local_videos', JSON.stringify(filtered));
}

// è·å–ç”Ÿæˆä¸­çš„è§†é¢‘
export function getProcessingVideos(): LocalVideo[] {
  return getLocalVideos().filter(v => v.status === 'processing');
}

// æ¢å¤è¿›è¡Œä¸­çš„ä»»åŠ¡
export function resumeProcessingVideos(): void {
  const processingVideos = getProcessingVideos();
  processingVideos.forEach(video => {
    startPollingTaskStatus(video.id);
  });
}
```

#### è§†é¢‘æ± æœåŠ¡ (video-pool.ts)

```typescript
// è·å–è§†é¢‘æ± 
export function getVideoPool(): VideoPoolItem[] {
  const data = localStorage.getItem('skyriff_video_pool');
  return data ? JSON.parse(data) : [];
}

// å‘å¸ƒè§†é¢‘åˆ°æ± 
export function publishToPool(video: LocalVideo): void {
  const poolItem: VideoPoolItem = {
    id: video.id,
    videoUrl: video.videoUrl,
    thumbnailUrl: video.thumbnailUrl,
    title: `AIç”Ÿæˆè§†é¢‘ ${new Date().toLocaleDateString()}`,
    description: video.prompt,
    author: 'åˆ›ä½œè€…',
    avatar: 'https://ui-avatars.com/api/?name=Creator',
    likes: 0,
    comments: 0,
    shares: 0,
    tags: extractTags(video.prompt),
    publishedAt: new Date().toISOString()
  };
  
  const pool = getVideoPool();
  pool.unshift(poolItem); // æœ€æ–°å‘å¸ƒçš„åœ¨å‰
  localStorage.setItem('skyriff_video_pool', JSON.stringify(pool));
}

// ç‚¹èµè§†é¢‘
export function likeVideo(id: string): void {
  const pool = getVideoPool();
  const video = pool.find(v => v.id === id);
  if (video) {
    video.likes += 1;
    localStorage.setItem('skyriff_video_pool', JSON.stringify(pool));
  }
}

// æ¨èç®—æ³•
export function getRecommendedVideos(count: number = 10): VideoPoolItem[] {
  const pool = getVideoPool();
  
  // ç®€å•æ¨èï¼šéšæœºç©¿æ’çƒ­é—¨è§†é¢‘
  const sorted = pool.sort((a, b) => {
    const scoreA = a.likes * 2 + a.comments * 3 + a.shares * 5;
    const scoreB = b.likes * 2 + b.comments * 3 + b.shares * 5;
    return scoreB - scoreA;
  });
  
  return sorted.slice(0, count);
}
```

---

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### Tailwind CSS v4.0é…ç½®

**ä¸»é¢˜å®šä¹‰** (/src/styles/theme.css):
```css
@import "tailwindcss";

:root {
  /* é¢œè‰²ç³»ç»Ÿ */
  --color-primary: #8b5cf6;
  --color-secondary: #3b82f6;
  --color-background: #0f0f0f;
  --color-surface: #1a1a1a;
  --color-border: rgba(255, 255, 255, 0.1);
  --color-text-primary: rgba(255, 255, 255, 0.9);
  --color-text-secondary: rgba(255, 255, 255, 0.6);
  
  /* é—´è·ç³»ç»Ÿ */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  
  /* åœ†è§’ */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  
  /* é˜´å½± */
  --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
  --shadow-md: 0 4px 8px rgba(0,0,0,0.2);
  --shadow-lg: 0 8px 16px rgba(0,0,0,0.3);
  
  /* åŠ¨ç”»æ—¶é•¿ */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
}

/* å…¨å±€æ ·å¼é‡ç½® */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background: var(--color-background);
  color: var(--color-text-primary);
  -webkit-font-smoothing: antialiased;
}

/* æ»šåŠ¨æ¡æ ·å¼ */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-surface);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-secondary);
}
```

### è‡ªå®šä¹‰åŠ¨ç”»

```css
/* åˆ›ä½œæŒ‰é’®æ—‹è½¬ */
@keyframes cute-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(90deg);
  }
}

.animate-cute-rotate {
  animation: cute-rotate 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

/* å¾½ç« éœ‡åŠ¨ */
@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

.animate-shake {
  animation: shake 0.5s ease-in-out infinite;
}

/* è¿›åº¦æ¡æµåŠ¨ */
@keyframes progress-flow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}

.animate-progress-flow {
  background-size: 200% 100%;
  animation: progress-flow 2s linear infinite;
}
```

---

## ğŸ“± å“åº”å¼å¸ƒå±€

### å®¹å™¨å®½åº¦çº¦æŸ

```typescript
// App.tsx
<div className="flex flex-col h-screen bg-[var(--color-background)] w-full max-w-[calc(100vh*9/16)] mx-auto">
```

**è®¡ç®—é€»è¾‘**:
- å§‹ç»ˆä¿æŒ9:16ç«–å±æ¯”ä¾‹
- é«˜åº¦å¡«æ»¡å±å¹• (h-screen)
- å®½åº¦æ ¹æ®é«˜åº¦è®¡ç®— (max-w-[calc(100vh*9/16)])
- å±…ä¸­å¯¹é½ (mx-auto)

### å®‰å…¨åŒºåŸŸé€‚é…

```css
/* iOSå®‰å…¨åŒºåŸŸ */
.safe-area-inset-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}
```

---

## ğŸ”„ äº‹ä»¶ç³»ç»Ÿ

### è‡ªå®šä¹‰äº‹ä»¶

```typescript
// è§†é¢‘ç”Ÿæˆå®Œæˆäº‹ä»¶
window.dispatchEvent(new CustomEvent('video-generation-complete', {
  detail: { videoId: 'xxx' }
}));

// ç›‘å¬äº‹ä»¶
window.addEventListener('video-generation-complete', (event) => {
  console.log('è§†é¢‘ç”Ÿæˆå®Œæˆ:', event.detail.videoId);
  updateProcessingCount();
});
```

### äº‹ä»¶åˆ—è¡¨

```typescript
// 1. è§†é¢‘ç”Ÿæˆå®Œæˆ
'video-generation-complete'

// 2. è§†é¢‘å‘å¸ƒæˆåŠŸ
'video-published'

// 3. æœåŠ¡å™¨çŠ¶æ€å˜åŒ–
'server-status-change'

// 4. ç”¨æˆ·æ“ä½œç»Ÿè®¡
'user-action-track'
```

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### 1. æ‡’åŠ è½½

```typescript
// å›¾ç‰‡æ‡’åŠ è½½
<img loading="lazy" src={...} />

// ç»„ä»¶æ‡’åŠ è½½
const VideoPlayer = React.lazy(() => import('./VideoPlayer'));
```

### 2. é˜²æŠ–/èŠ‚æµ

```typescript
// æ»‘åŠ¨é˜²æŠ–
const handleScroll = debounce((delta) => {
  if (Math.abs(delta) > SWIPE_THRESHOLD) {
    changeVideo(delta > 0 ? 1 : -1);
  }
}, 300);

// è¿›åº¦è½®è¯¢èŠ‚æµ
const pollStatus = throttle(async () => {
  await getTaskStatus(taskId);
}, 5000);
```

### 3. è™šæ‹Ÿæ»šåŠ¨

```typescript
// å¤§åˆ—è¡¨ä¼˜åŒ–ï¼ˆæœªæ¥å®ç°ï¼‰
<VirtualList
  items={videos}
  itemHeight={200}
  renderItem={(video) => <VideoCard {...video} />}
/>
```

### 4. ç¼“å­˜ç­–ç•¥

```typescript
// APIå“åº”ç¼“å­˜
const cache = new Map();

async function fetchWithCache(url: string) {
  if (cache.has(url)) {
    return cache.get(url);
  }
  
  const response = await fetch(url);
  cache.set(url, response);
  return response;
}
```

---

## ğŸ” å®‰å…¨æ€§

### APIå¯†é’¥ä¿æŠ¤

```typescript
// æ°¸è¿œä¸è¦åœ¨å®¢æˆ·ç«¯ç¡¬ç¼–ç APIï¿½ï¿½ï¿½é’¥
// ä½¿ç”¨ç¯å¢ƒå˜é‡
const API_KEY = import.meta.env.VITE_SORA_API_KEY;

// ç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨æœåŠ¡ç«¯ä»£ç†
// /api/generate -> åç«¯æœåŠ¡å™¨ -> Sora2 API
```

### XSSé˜²æŠ¤

```typescript
// ç”¨æˆ·è¾“å…¥æ¸…ç†
function sanitizeInput(input: string): string {
  return input
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#x27;');
}

// Reactè‡ªåŠ¨è½¬ä¹‰
<div>{userInput}</div> // å®‰å…¨
```

### CSRFé˜²æŠ¤

```typescript
// æ·»åŠ CSRF Token
headers: {
  'X-CSRF-Token': getCsrfToken()
}
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```typescript
// VideoGenerator.test.tsx
describe('VideoGenerator', () => {
  it('should generate video with valid prompt', async () => {
    const onClose = jest.fn();
    const { getByText, getByPlaceholderText } = render(
      <VideoGenerator onClose={onClose} />
    );
    
    const input = getByPlaceholderText('æè¿°ä½ æƒ³ç”Ÿæˆçš„è§†é¢‘...');
    fireEvent.change(input, { target: { value: 'A cat playing' } });
    
    const button = getByText('å¼€å§‹ç”Ÿæˆ');
    fireEvent.click(button);
    
    await waitFor(() => {
      expect(mockGenerateVideo).toHaveBeenCalled();
    });
  });
});
```

### é›†æˆæµ‹è¯•

```typescript
// æµ‹è¯•å®Œæ•´çš„è§†é¢‘ç”Ÿæˆæµç¨‹
it('should complete video generation flow', async () => {
  // 1. æ‰“å¼€ç”Ÿæˆå™¨
  // 2. è¾“å…¥æç¤ºè¯
  // 3. ç‚¹å‡»ç”Ÿæˆ
  // 4. ç­‰å¾…å®Œæˆ
  // 5. éªŒè¯è§†é¢‘å‡ºç°åœ¨èµ„äº§é¡µ
});
```

---

## ğŸ“¦ æ„å»ºä¸éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

```bash
npm install
npm run dev
# è®¿é—® http://localhost:5173
```

### ç”Ÿäº§æ„å»º

```bash
npm run build
# è¾“å‡ºåˆ° /dist ç›®å½•
```

### ç¯å¢ƒå˜é‡

```env
# .env.development
VITE_SORA_API_KEY=sk-dev-xxx
VITE_API_BASE_URL=https://api-dev.sora2.ai

# .env.production
VITE_SORA_API_KEY=sk-prod-xxx
VITE_API_BASE_URL=https://api.sora2.ai
```

### éƒ¨ç½²é…ç½®

**Vercel**:
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite"
}
```

**Nginx**:
```nginx
server {
  listen 80;
  server_name skyriff.com;
  
  root /var/www/skyriff/dist;
  index index.html;
  
  location / {
    try_files $uri $uri/ /index.html;
  }
  
  # APIä»£ç†
  location /api/ {
    proxy_pass https://api.sora2.ai/;
    proxy_set_header Authorization "Bearer ${SORA_API_KEY}";
  }
}
```

---

## ğŸ”§ å¼€å‘å·¥å…·

### æ¨èæ‰©å±•

**VSCode**:
- ESLint
- Prettier
- Tailwind CSS IntelliSense
- TypeScript Vue Plugin (Volar)

### ä»£ç è§„èŒƒ

**ESLinté…ç½®**:
```json
{
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended",
    "plugin:@typescript-eslint/recommended"
  ],
  "rules": {
    "react/prop-types": "off",
    "@typescript-eslint/no-explicit-any": "warn"
  }
}
```

**Prettieré…ç½®**:
```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

---

## ğŸ“Š ç›‘æ§ä¸åˆ†æ

### æ€§èƒ½ç›‘æ§

```typescript
// é¡µé¢åŠ è½½æ€§èƒ½
window.addEventListener('load', () => {
  const perfData = window.performance.timing;
  const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
  console.log('é¡µé¢åŠ è½½æ—¶é—´:', pageLoadTime);
});

// ç»„ä»¶æ¸²æŸ“æ€§èƒ½
React.Profiler(
  id: "HomePage",
  onRender: (id, phase, actualDuration) => {
    console.log(`${id} (${phase}) took ${actualDuration}ms`);
  }
);
```

### ç”¨æˆ·è¡Œä¸ºåˆ†æ

```typescript
// åŸ‹ç‚¹ä¸ŠæŠ¥
function trackEvent(eventName: string, params: object) {
  console.log('åŸ‹ç‚¹ä¸ŠæŠ¥:', eventName, params);
  
  // å‘é€åˆ°åˆ†ææœåŠ¡
  fetch('/api/analytics', {
    method: 'POST',
    body: JSON.stringify({ eventName, params, timestamp: Date.now() })
  });
}

// ä½¿ç”¨ç¤ºä¾‹
trackEvent('video_generated', {
  videoId: 'xxx',
  prompt: 'A cat playing',
  duration: 10
});
```

---

## ğŸš€ æœªæ¥æ¶æ„è§„åˆ’

### 1. åç«¯æœåŠ¡

```
å‰ç«¯åº”ç”¨ â†’ API Gateway â†’ å¾®æœåŠ¡é›†ç¾¤
                        â”œâ”€â”€ ç”¨æˆ·æœåŠ¡
                        â”œâ”€â”€ è§†é¢‘æœåŠ¡
                        â”œâ”€â”€ AIç”ŸæˆæœåŠ¡
                        â””â”€â”€ ç¤¾äº¤æœåŠ¡
```

### 2. æ•°æ®åº“è®¾è®¡

**PostgreSQL**:
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id UUID PRIMARY KEY,
  username VARCHAR(50) UNIQUE,
  avatar_url TEXT,
  created_at TIMESTAMP
);

-- è§†é¢‘è¡¨
CREATE TABLE videos (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  video_url TEXT,
  prompt TEXT,
  likes_count INT DEFAULT 0,
  created_at TIMESTAMP
);

-- è¯„è®ºè¡¨
CREATE TABLE comments (
  id UUID PRIMARY KEY,
  video_id UUID REFERENCES videos(id),
  user_id UUID REFERENCES users(id),
  content TEXT,
  created_at TIMESTAMP
);
```

### 3. å®æ—¶é€šä¿¡

**WebSocket**:
```typescript
// å®æ—¶é€šçŸ¥
const ws = new WebSocket('wss://api.skyriff.com/ws');

ws.onmessage = (event) => {
  const notification = JSON.parse(event.data);
  
  if (notification.type === 'video_complete') {
    showToast('è§†é¢‘ç”Ÿæˆå®Œæˆï¼');
    updateVideoList();
  }
};
```

### 4. CDNåŠ é€Ÿ

```
ç”¨æˆ·è¯·æ±‚ â†’ CDNè¾¹ç¼˜èŠ‚ç‚¹ â†’ æºç«™
         â†“
    ç¼“å­˜å‘½ä¸­ï¼ˆ90%+ï¼‰
    ç›´æ¥è¿”å›è§†é¢‘
```

---

## ğŸ“š æŠ€æœ¯å€ºåŠ¡

### å½“å‰å·²çŸ¥é—®é¢˜

1. **localStorageå®¹é‡é™åˆ¶**
   - é—®é¢˜ï¼šæœ€å¤§5MBå­˜å‚¨
   - æ–¹æ¡ˆï¼šè¿ç§»åˆ°IndexedDB

2. **è½®è¯¢æ•ˆç‡ä½**
   - é—®é¢˜ï¼šæ¯5ç§’è¯·æ±‚API
   - æ–¹æ¡ˆï¼šæ”¹ä¸ºWebSocketæ¨é€

3. **æ— ç”¨æˆ·ç³»ç»Ÿ**
   - é—®é¢˜ï¼šæ•°æ®æ— æ³•è·¨è®¾å¤‡åŒæ­¥
   - æ–¹æ¡ˆï¼šå®ç°ç™»å½•æ³¨å†Œ

4. **è§†é¢‘æ± æ¨èç®€å•**
   - é—®é¢˜ï¼šæ¨èç®—æ³•è¿‡äºç®€å•
   - æ–¹æ¡ˆï¼šå¼•å…¥æœºå™¨å­¦ä¹ æ¨è

---

## ğŸ“ å­¦ä¹ èµ„æº

### Reactç”Ÿæ€

- [Reactå®˜æ–¹æ–‡æ¡£](https://react.dev)
- [TypeScriptæ‰‹å†Œ](https://www.typescriptlang.org/docs)
- [Tailwind CSSæ–‡æ¡£](https://tailwindcss.com)

### è§†é¢‘æŠ€æœ¯

- [Web Video API](https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement)
- [MediaStream Recording](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API)

### AIç›¸å…³

- [Sora2 APIæ–‡æ¡£](https://docs.sora2.ai)
- [OpenAIè§†é¢‘ç”Ÿæˆ](https://openai.com/sora)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
refactor: é‡æ„
test: æµ‹è¯•
chore: æ„å»ºå·¥å…·
```

### åˆ†æ”¯ç®¡ç†

```
main - ç”Ÿäº§ç¯å¢ƒ
develop - å¼€å‘ç¯å¢ƒ
feature/* - åŠŸèƒ½åˆ†æ”¯
hotfix/* - ç´§æ€¥ä¿®å¤
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

**å¼€å‘å›¢é˜Ÿ**: SkyRiff Dev Team  
**æ–‡æ¡£ç»´æŠ¤**: æŠ€æœ¯æ¶æ„å¸ˆ  
**æœ€åæ›´æ–°**: 2024-12-24  
**ç‰ˆæœ¬**: v1.0

---

## ğŸ¯ æ€»ç»“

SkyRiffé‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œå®Œæ•´é›†æˆSora2 AIè§†é¢‘ç”Ÿæˆèƒ½åŠ›ï¼Œå®ç°äº†ä»è§†é¢‘ç”Ÿæˆã€å­˜å‚¨ç®¡ç†åˆ°ç¤¾äº¤åˆ†äº«çš„å®Œæ•´é—­ç¯ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**:
- âœ… å®Œæ•´çš„Sora2 APIé›†æˆ
- âœ… æµç•…çš„ç±»æŠ–éŸ³çŸ­è§†é¢‘ä½“éªŒ
- âœ… å®æ—¶çš„è§†é¢‘ç”Ÿæˆè¿›åº¦è¿½è¸ª
- âœ… å®Œå–„çš„æœ¬åœ°å­˜å‚¨ç®¡ç†
- âœ… ç²¾è‡´çš„iOSé£æ ¼ç•Œé¢

**æœªæ¥æ–¹å‘**:
- ğŸš€ åç«¯æœåŠ¡åŒ–
- ğŸš€ ç”¨æˆ·ç³»ç»Ÿ
- ğŸš€ å®æ—¶é€šä¿¡
- ğŸš€ æ™ºèƒ½æ¨è
- ğŸš€ åˆ›ä½œè€…æ¿€åŠ±

è®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ æœ€å¥½çš„AIè§†é¢‘åˆ›ä½œå¹³å°ï¼ğŸ¬âœ¨
