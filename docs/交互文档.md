# SkyRiff APP - 交互文档

## 📱 项目概述

**项目名称**: SkyRiff  
**项目定位**: AI视频社交APP - 面向创作者的AI视频创作平台  
**设计风格**: iOS风格深色主题  
**屏幕比例**: 9:16 竖屏（移动端优先）  
**技术栈**: React + TypeScript + Tailwind CSS  
**API集成**: Sora2 完整8个接口

---

## 🎨 设计系统

### 主题色彩

```css
--color-primary: #8b5cf6 (紫色)
--color-secondary: #3b82f6 (蓝色)
--color-background: #0f0f0f (深黑)
--color-surface: #1a1a1a (浅黑)
--color-border: rgba(255, 255, 255, 0.1)
--color-text-primary: rgba(255, 255, 255, 0.9)
--color-text-secondary: rgba(255, 255, 255, 0.6)
```

### 视觉规范

- **圆角**: 24px倒角（长方形按钮）/ rounded-full（圆形图标）
- **阴影**: shadow-lg + 彩色光晕效果
- **渐变**: 蓝紫双色渐变（primary → secondary）
- **动画**: 流畅的Motion动画 + CSS过渡效果

---

## 🏗️ APP结构

### 五大主Tab页面

```
底部导航栏
├── 首页 (Home) - 短视频社交流
├── 工具 (Tools) - AI工具集合
├── 创作 (Create) - 中心特殊按钮
├── 资产 (Assets) - 个人视频管理
└── 我的 (Profile) - 用户个人中心
```

### 特殊页面

- **Video Studio**: 创意工作室（右上角快捷入口）
- **Server Launcher**: Sora2服务器启动器（首次启动弹窗）
- **Video Generator**: 视频生成器（全局模态弹窗）

---

## 📄 页面详细交互

### 1️⃣ 首页 (HomePage)

#### 核心功能：短视频社交流

**视觉布局**:
```
┌─────────────────────────┐
│ 顶部标题栏              │
├─────────────────────────┤
│                         │
│   全屏视频播放器        │ ← 类似抖音的沉浸式体验
│   (9:16 竖屏)           │
│                         │
│   右侧交互栏 →          │
│   - 点赞 ❤️             │
│   - 评论 💬             │
│   - 分享 🔗             │
│   - 创作者头像          │
│                         │
│   底部信息栏 ↓          │
│   - @用户名             │
│   - 视频描述            │
│   - #话题标签           │
│                         │
└─────────────────────────┘
```

#### 交互行为

1. **上下滑动切换视频**
   - 向上滑动：下一个视频
   - 向下滑动：上一个视频
   - 滑动阈值：50px
   - 切换动画：fade-in/out (300ms)

2. **视频自动播放**
   - 当前视频自动播放
   - 切换视频时暂停上一个
   - 循环播放（loop）
   - 静音控制按钮

3. **右侧交互栏**
   - **点赞按钮**: 点击切换红心动画，数字+1/-1
   - **评论按钮**: 打开评论抽屉（底部上滑）
   - **分享按钮**: 分享选项弹窗
   - **创作者头像**: 点击跳转到创作者主页

4. **底部信息栏**
   - **用户名**: 可点击跳转主页
   - **描述**: 展开/收起长文本
   - **话题标签**: 点击进入话题页

5. **智能推荐算法**
   - 根据用户行为推荐（点赞、观看时长）
   - 随机穿插推荐
   - 无限滚动加载

#### 数据来源

```javascript
// 从视频池获取推荐视频
getVideoPool() → 
  筛选已发布视频 → 
  推荐算法排序 → 
  首页展示
```

---

### 2️⃣ 工具页 (ToolsPage)

#### 核心功能：AI工具集合

**工具卡片网格布局**:
```
┌─────────────────────────┐
│ 🎬 AI视频生成           │ ← 主功能
│ 输入提示词，生成视频     │
├─────────────────────────┤
│ 🎨 视频编辑器           │
│ 剪辑、特效、配乐         │
├─────────────────────────┤
│ 🎵 AI配音               │
│ 文字转语音、配音         │
├─────────────────────────┤
│ 📊 数据分析             │
│ 视频数据、粉丝分析       │
└─────────────────────────┘
```

#### 交互行为

1. **工具卡片**
   - Hover效果：阴影放大、渐变光晕
   - 点击行为：
     - AI视频生成 → 打开VideoGenerator弹窗
     - 其他工具 → Toast提示"功能开发中"

2. **工具分类**
   - 创作工具（视频生成、编辑）
   - 运营工具（数据分析、营销）
   - 辅助工具（配音、字幕）

---

### 3️⃣ 创作页 (CreatePage)

#### 核心功能：快速创作入口

**快捷操作卡片**:
```
┌─────────────────────────┐
│ ⚡ 快速生成视频          │
│ 点击立即开始创作         │
├─────────────────────────┤
│ 📝 创作草稿             │
│ 查看未完成的创作         │
├─────────────────────────┤
│ 🎯 热门模板             │
│ 使用模板快速创作         │
└─────────────────────────┘
```

#### 交互行为

- 点击"快速生成视频" → 打开VideoGenerator
- 点击"创作草稿" → 显示草稿列表
- 点击模板卡片 → 应用模板到生成器

---

### 4️⃣ 资产页 (AssetsPage)

#### 核心功能：个人视频资产管理

**双Tab切换布局**:
```
┌─────────────────────────┐
│ [本地视频] [已发布]     │ ← Tab切换
├─────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐│
│ │视频1│ │视频2│ │视频3││ ← 3列网格
│ │封面 │ │封面 │ │封面 ││
│ │状态 │ │状态 │ │状态 ││
│ └─────┘ └─────┘ └─────┘│
│ ┌─────┐ ┌─────┐ ┌─────┐│
│ │视频4│ │视频5│ │视频6││
│ └─────┘ └─────┘ └─────┘│
└─────────────────────────┘
```

#### 视频状态流转

```
生成中 → 生成完成 → 已发布
  ↓         ↓         ↓
进度条   发布按钮   查看详情
 🔄        📤         ✅
```

#### 交互行为

1. **Tab切换**
   - **本地视频**: 显示所有生成的视频（包括生成中）
   - **已发布**: 只显示已发布到首页的视频

2. **视频卡片状态**

   **生成中状态**:
   ```
   ┌─────────────────┐
   │   视频封面      │
   │   ────────      │ ← 进度条
   │   生成中... 45% │
   └─────────────────┘
   ```
   - 实时进度条动画
   - 百分比显示
   - 震动动画吸引注意

   **生成完成状态**:
   ```
   ┌─────────────────┐
   │   视频封面      │
   │   🎬 播放       │
   │   📤 发布       │ ← 操作按钮
   │   🗑️ 删除       │
   └─────────────────┘
   ```
   - 播放按钮 → 预览视频
   - 发布按钮 → 一键发布到首页
   - 删除按钮 → 二次确认删除

   **已发布状态**:
   ```
   ┌─────────────────┐
   │   视频封面      │
   │   ✅ 已发布     │
   │   👁️ 查看详情   │ ← 跳转到首页
   └────────────���────┘
   ```
   - 查看详情 → 跳转到首页并定位到该视频
   - 显示发布时间、观看数据

3. **一键发布流程**
   ```
   点击发布按钮 →
   填写视频信息（标题、描述、话题） →
   确认发布 →
   添加到视频池 →
   Toast提示"发布成功" →
   跳转到首页查看
   ```

4. **资产统计**
   - 顶部显示：总视频数、生成中数量
   - 徽章提示：底部导航栏资产图标显示生成中数量

---

### 5️⃣ 我的页 (ProfilePage)

#### 核心功能：用户个人中心

**个人信息卡片**:
```
┌─────────────────────────┐
│    👤 用户头像          │
│    创作者名称           │
│    简介文字             │
│                         │
│ 📊 123作品 | 4.5K粉丝  │
└─────────────────────────┘
```

**功能列表**:
```
├─ 🎬 我的作品
├─ ❤️ 点赞收藏
├─ 📈 数据中心
├─ ⚙️ 设置
└─ 🚪 退出登录
```

#### 交互行为

- 点击头像 → 编辑个人信息
- 点击作品/粉丝数 → 查看详细数据
- 功能列表项 → 进入对应页面或弹窗

---

## 🎯 核心交互组件

### 1. 底部导航栏 (BottomNav)

#### 设计规格

```
高度: 80px + safe-area-inset-bottom
背景: var(--color-surface)
边框: 1px 顶部边框
对齐: 水平均分5个按钮
```

#### 按钮规格

**常规按钮** (首页/工具/资产/我的):
```
图标尺寸: 48px × 48px (2倍放大)
内边距: px-8 py-4 (32px × 16px)
文字: text-sm (14px)
激活色: var(--color-primary)
未激活色: var(--color-text-secondary)
```

**创作按钮** (中心特殊按钮):
```
容器尺寸: 128px × 80px
形状: 长方形，24px倒角
位置: 向上偏移 -40px
背景: 蓝紫渐变
外圈: 发光模糊效果
```

#### 创作按钮详细设计

**立体+号图标**:
```
竖条: 15.6px × 62.4px
横条: 62.4px × 15.6px
放大倍数: 1.3倍
颜色: 白色渐变
圆角: rounded-full (胶囊形)
阴影: shadow-lg
```

**旋转动画**:
```
触发频率: 每4秒
旋转角度: 90度
持续时间: 0.6秒
缓动函数: cubic-bezier(0.68, -0.55, 0.27, 1.55)
```

**星星装饰**:
```
黄色星星:
  - 尺寸: 24px × 24px
  - 位置: top-2 right-3 (距右上角)
  - 动画: pulse (闪烁)

蓝色星星:
  - 尺寸: 16px × 16px
  - 位置: bottom-2 left-3 (距左下角)
  - 动画: pulse (闪烁，延迟0.5s)
```

**视觉结构图**:
```
┌─────────────────────────────────────────┐
│   长方形容器 (128px × 80px)             │
│   ┌─────────────────────────────────┐   │
│   │ ╭─────────────────────────────╮ │   │
│   │ │   ⭐ 黄色                   │ │   │
│   │ │          ║                  │ │   │
│   │ │  ════════╬════════          │ │   │
│   │ │          ║                  │ │   │
│   │ │                  ⭐ 蓝色    │ │   │
│   │ ╰─────────────────────────────╯ │   │
│   └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

#### 资产按钮徽章

**生成中视频数量提示**:
```
位置: 资产图标右上角
尺寸: 36px × 36px (圆形)
背景: red-500
文字: 白色粗体数字
动画: shake (震动提示)
```

---

### 2. VideoGenerator (视频生成器)

#### 弹窗规格

```
类型: 全屏模态弹窗
背景: 半透明黑色遮罩
内容区: 居中卡片，最大宽度600px
关闭: ESC键 / 点击遮罩 / 关闭按钮
```

#### 生成流程

**步骤1: 输入提示词**
```
┌─────────────────────────┐
│ 📝 描述你想生成的视频    │
│ ┌─────────────────────┐ │
│ │                     │ │
│ │   文本输入框         │ │ ← 多行文本
│ │   (最少10个字符)     │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ 💡 示例提示:           │
│ "一只可爱的猫咪..."     │
└─────────────────────────┘
```

**步骤2: 配置参数**
```
├─ 视频尺寸: 1920×1080 / 1080×1920
├─ 视频时长: 5秒 / 10秒 / 15秒
├─ 运动幅度: 低 / 中 / 高
└─ 生成模型: Sora2
```

**步骤3: 生成视频**
```
点击生成 →
显示生成中状态 →
实时进度更新 →
完成后显示预览 →
保存到资产库
```

#### 生成状态反馈

**生成中**:
```
┌─────────────────────────┐
│    🎬                   │
│  视频生成中...          │
│  ════════ 45%           │ ← 进度条
│                         │
│ 预计剩余时间: 2分30秒   │
│                         │
│ [取消生成]              │
└─────────────────────────┘
```

**生成完成**:
```
┌─────────────────────────┐
│  ✅ 生成成功！          │
│  ┌─────────────────┐   │
│  │   视频预览       │   │
│  │   ▶️ 播放        │   │
│  └─────────────────┘   │
│                         │
│ [保存到资产] [重新生成] │
└─────────────────────────┘
```

---

### 3. VideoStudio (创意工作室)

#### 快捷入口

```
位置: 右上角固定按钮
尺寸: 56px × 56px 圆形
图标: 📹 Video + ✨ Sparkles
背景: 蓝紫渐变
悬浮: 阴影 + 缩放动画
```

#### 工作室功能

```
┌─────────────────────────┐
│ 🎨 创意工作室           │
├─────────────────────────┤
│ ├─ 视频编辑器           │
│ ├─ 特效库               │
│ ├─ 模板中心             │
│ └─ 素材库               │
└─────────────────────────┘
```

---

### 4. ServerLauncher (服务器启动器)

#### 首次启动引导

```
┌─────────────────────────┐
│    🚀 SkyRiff           │
│                         │
│  欢迎使用AI视频创作平台 │
│                         │
│  需要启动Sora2服务器    │
│  才能使用视频生成功能   │
│                         │
│  [启动服务器] [稍后]    │
└─────────────────────────┘
```

#### 启动状态

**启动中**:
```
🔄 正在启动服务器...
检查环境 → 连接API → 验证密钥
```

**启动成功**:
```
✅ 服务器已启动
Sora2 API: 在线
Token: 有效
```

**启动失败**:
```
❌ 启动失败
请检查网络连接和API密钥
[重试] [配置]
```

---

## 🎭 动画系统

### 全局动画

**页面切换**:
```css
transition: opacity 300ms ease-in-out
```

**悬浮效果**:
```css
hover:scale-110
transition-transform 200ms
```

**按钮点击**:
```css
active:scale-95
transition 100ms
```

### 特殊动画

**创作按钮旋转**:
```css
@keyframes cute-rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(90deg); }
}
duration: 0.6s
timing: cubic-bezier(0.68, -0.55, 0.27, 1.55)
```

**徽章震动**:
```css
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}
duration: 0.5s
timing: ease-in-out
```

**星星闪烁**:
```css
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
duration: 2s
timing: ease-in-out
```

**进度条流动**:
```css
@keyframes progress-flow {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}
background: linear-gradient(90deg, ...)
background-size: 200% 100%
```

---

## 📊 数据流转

### 视频生成流程

```
用户输入提示词 →
  ↓
VideoGenerator组件 →
  ↓
调用Sora2 API生成视频 →
  ↓
轮询检查生成状态 →
  ↓
生成完成，保存到localStorage →
  ↓
更新资产页面显示 →
  ↓
显示生成中徽章 →
  ↓
用户点击发布 →
  ↓
添加到视频池 →
  ↓
首页展示推荐
```

### 数据存储结构

**本地视频** (localStorage: `skyriff_local_videos`):
```javascript
{
  id: string,
  videoUrl: string,
  thumbnailUrl: string,
  prompt: string,
  status: 'processing' | 'completed',
  progress: number,
  createdAt: string
}
```

**视频池** (localStorage: `skyriff_video_pool`):
```javascript
{
  id: string,
  videoUrl: string,
  thumbnailUrl: string,
  title: string,
  description: string,
  author: string,
  avatar: string,
  likes: number,
  comments: number,
  shares: number,
  tags: string[],
  publishedAt: string
}
```

---

## 🎯 交互原则

### 1. 响应式反馈

- 所有操作提供即时视觉反馈
- Toast提示清晰简洁
- 进度条实时更新

### 2. 流畅动画

- 所有过渡动画≤300ms
- 使用硬件加速
- 避免布局抖动

### 3. 错误处理

- 友好的错误提示
- 提供解决方案
- 允许重试操作

### 4. 加载状态

- 显示骨架屏或进度条
- 避免白屏等待
- 提供取消操作选项

### 5. 手势支持

- 上下滑动切换视频
- 双击点赞
- 长按显示更多操作

---

## 📱 响应式设计

### 屏幕适配

**容器宽度**:
```css
max-width: calc(100vh * 9 / 16)
/* 始终保持9:16比例 */
```

**安全区域**:
```css
safe-area-inset-bottom
/* iOS底部Home指示器 */
```

### 触摸优化

- 按钮最小触摸区域: 48px × 48px
- 滑动灵敏度: 50px阈值
- 防止误触: 300ms延迟

---

## 🎨 视觉亮点

1. **创作按钮**
   - 长方形带倒角
   - 立体+号 + 双星装饰
   - 每4秒旋转90度
   - 向上偏移露出底部UI

2. **全屏视频播放器**
   - 沉浸式体验
   - 类似抖音的交互
   - 流畅的切换动画

3. **生成进度可视化**
   - 实时进度条
   - 百分比显示
   - 震动提示

4. **渐变光晕效果**
   - 按钮外圈模糊发光
   - 蓝紫双色渐变
   - Pulse动画呼吸感

---

## 📝 待完善功能

### 短期规划

- [ ] 评论系统抽屉
- [ ] 分享功能弹窗
- [ ] 视频编辑器
- [ ] 数据分析页面

### 长期规划

- [ ] 用户系统（登录/注册）
- [ ] 粉丝关注系统
- [ ] 私信聊天功能
- [ ] 直播功能
- [ ] 创作者激励系统

---

## 🎯 设计哲学

> **简洁而不简单** - 极简的界面，强大的功能  
> **流畅而自然** - 动画过渡自然，交互符合直觉  
> **专注创作** - 降低创作门槛，专注内容本身  
> **社交为本** - 构建创作者与观众的连接

---

**文档版本**: v1.0  
**最后更新**: 2024-12-24  
**维护者**: SkyRiff开发团队
