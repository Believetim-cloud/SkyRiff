@echo off
chcp 65001 >nul
echo ╔═══════════════════════════════════════════════════════════════╗
echo ║                                                               ║
echo ║          🔧 解决端口 3001 占用问题                             ║
echo ║                                                               ║
echo ╚═══════════════════════════════════════════════════════════════╝
echo.
echo 正在检查端口 3001 占用情况...
echo.

netstat -ano | findstr :3001

echo.
echo ════════════════════════════════════════════════════════════════
echo.
echo 📋 操作说明：
echo.
echo 如果上面显示了进程信息（最后一列是PID），说明端口被占用了。
echo.
echo 例如：
echo   TCP    0.0.0.0:3001    0.0.0.0:0    LISTENING    12345
echo                                                      ^^^^^ 
echo                                                      这是PID
echo.
echo ════════════════════════════════════════════════════════════════
echo.
echo 💡 解决方案：
echo.
echo 方案1：关闭占用端口的进程
echo ─────────────────────────────────
echo 输入命令：taskkill /PID 你的PID /F
echo 例如：taskkill /PID 12345 /F
echo.
echo 方案2：检查是否后端已经在运行
echo ─────────────────────────────────
echo 打开浏览器访问：http://localhost:3001
echo 如果看到响应，说明后端已经启动成功！
echo 直接使用前端即可，不需要再次启动后端。
echo.
echo 方案3：修改端口号
echo ─────────────────────────────────
echo 编辑 server\.env 文件，添加：
echo PORT=3002
echo 然后修改前端配置使用新端口。
echo.
echo ════════════════════════════════════════════════════════════════
echo.
pause
